"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var m=require("electron"),V=require("path"),Rr=require("child_process"),yr=require("fs"),Ir=require("os");function Pe(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var _e=Pe(V),Tr=Pe(Ir),ge={exports:{}};(function(u,n){n=u.exports=h;var l;typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?l=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:l=function(){},n.SEMVER_SPEC_VERSION="2.0.0";var w=256,R=Number.MAX_SAFE_INTEGER||9007199254740991,y=16,d=n.re=[],i=n.src=[],f=0,B=f++;i[B]="0|[1-9]\\d*";var j=f++;i[j]="[0-9]+";var re=f++;i[re]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var Re=f++;i[Re]="("+i[B]+")\\.("+i[B]+")\\.("+i[B]+")";var ye=f++;i[ye]="("+i[j]+")\\.("+i[j]+")\\.("+i[j]+")";var te=f++;i[te]="(?:"+i[B]+"|"+i[re]+")";var ne=f++;i[ne]="(?:"+i[j]+"|"+i[re]+")";var ie=f++;i[ie]="(?:-("+i[te]+"(?:\\."+i[te]+")*))";var se=f++;i[se]="(?:-?("+i[ne]+"(?:\\."+i[ne]+")*))";var ae=f++;i[ae]="[0-9A-Za-z-]+";var U=f++;i[U]="(?:\\+("+i[ae]+"(?:\\."+i[ae]+")*))";var ue=f++,Ie="v?"+i[Re]+i[ie]+"?"+i[U]+"?";i[ue]="^"+Ie+"$";var oe="[v=\\s]*"+i[ye]+i[se]+"?"+i[U]+"?",le=f++;i[le]="^"+oe+"$";var L=f++;i[L]="((?:<|>)?=?)";var z=f++;i[z]=i[j]+"|x|X|\\*";var H=f++;i[H]=i[B]+"|x|X|\\*";var O=f++;i[O]="[v=\\s]*("+i[H]+")(?:\\.("+i[H]+")(?:\\.("+i[H]+")(?:"+i[ie]+")?"+i[U]+"?)?)?";var P=f++;i[P]="[v=\\s]*("+i[z]+")(?:\\.("+i[z]+")(?:\\.("+i[z]+")(?:"+i[se]+")?"+i[U]+"?)?)?";var Te=f++;i[Te]="^"+i[L]+"\\s*"+i[O]+"$";var Ae=f++;i[Ae]="^"+i[L]+"\\s*"+i[P]+"$";var Fe=f++;i[Fe]="(?:^|[^\\d])(\\d{1,"+y+"})(?:\\.(\\d{1,"+y+"}))?(?:\\.(\\d{1,"+y+"}))?(?:$|[^\\d])";var Y=f++;i[Y]="(?:~>?)";var W=f++;i[W]="(\\s*)"+i[Y]+"\\s+",d[W]=new RegExp(i[W],"g");var Ve="$1~",Se=f++;i[Se]="^"+i[Y]+i[O]+"$";var $e=f++;i[$e]="^"+i[Y]+i[P]+"$";var Z=f++;i[Z]="(?:\\^)";var J=f++;i[J]="(\\s*)"+i[Z]+"\\s+",d[J]=new RegExp(i[J],"g");var Ue="$1^",Ce=f++;i[Ce]="^"+i[Z]+i[O]+"$";var De=f++;i[De]="^"+i[Z]+i[P]+"$";var ce=f++;i[ce]="^"+i[L]+"\\s*("+oe+")$|^$";var fe=f++;i[fe]="^"+i[L]+"\\s*("+Ie+")$|^$";var X=f++;i[X]="(\\s*)"+i[L]+"\\s*("+oe+"|"+i[O]+")",d[X]=new RegExp(i[X],"g");var Xe="$1$2$3",Oe=f++;i[Oe]="^\\s*("+i[O]+")\\s+-\\s+("+i[O]+")\\s*$";var Ne=f++;i[Ne]="^\\s*("+i[P]+")\\s+-\\s+("+i[P]+")\\s*$";var be=f++;i[be]="(<|>)?=?\\s*\\*";for(var N=0;N<f;N++)l(N,i[N]),d[N]||(d[N]=new RegExp(i[N]));n.parse=b;function b(e,r){if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),e instanceof h)return e;if(typeof e!="string"||e.length>w)return null;var t=r.loose?d[le]:d[ue];if(!t.test(e))return null;try{return new h(e,r)}catch{return null}}n.valid=Ge;function Ge(e,r){var t=b(e,r);return t?t.version:null}n.clean=xe;function xe(e,r){var t=b(e.trim().replace(/^[=v]+/,""),r);return t?t.version:null}n.SemVer=h;function h(e,r){if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),e instanceof h){if(e.loose===r.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>w)throw new TypeError("version is longer than "+w+" characters");if(!(this instanceof h))return new h(e,r);l("SemVer",e,r),this.options=r,this.loose=!!r.loose;var t=e.trim().match(r.loose?d[le]:d[ue]);if(!t)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>R||this.major<0)throw new TypeError("Invalid major version");if(this.minor>R||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>R||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(function(s){if(/^[0-9]+$/.test(s)){var a=+s;if(a>=0&&a<R)return a}return s}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}h.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},h.prototype.toString=function(){return this.version},h.prototype.compare=function(e){return l("SemVer.compare",this.version,this.options,e),e instanceof h||(e=new h(e,this.options)),this.compareMain(e)||this.comparePre(e)},h.prototype.compareMain=function(e){return e instanceof h||(e=new h(e,this.options)),_(this.major,e.major)||_(this.minor,e.minor)||_(this.patch,e.patch)},h.prototype.comparePre=function(e){if(e instanceof h||(e=new h(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var r=0;do{var t=this.prerelease[r],s=e.prerelease[r];if(l("prerelease compare",r,t,s),t===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(t===void 0)return-1;if(t===s)continue;return _(t,s)}while(++r)},h.prototype.inc=function(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var t=this.prerelease.length;--t>=0;)typeof this.prerelease[t]=="number"&&(this.prerelease[t]++,t=-2);t===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},n.inc=ze;function ze(e,r,t,s){typeof t=="string"&&(s=t,t=void 0);try{return new h(e,t).inc(r,s).version}catch{return null}}n.diff=He;function He(e,r){if(he(e,r))return null;var t=b(e),s=b(r),a="";if(t.prerelease.length||s.prerelease.length){a="pre";var o="prerelease"}for(var c in t)if((c==="major"||c==="minor"||c==="patch")&&t[c]!==s[c])return a+c;return o}n.compareIdentifiers=_;var Be=/^[0-9]+$/;function _(e,r){var t=Be.test(e),s=Be.test(r);return t&&s&&(e=+e,r=+r),e===r?0:t&&!s?-1:s&&!t?1:e<r?-1:1}n.rcompareIdentifiers=Ye;function Ye(e,r){return _(r,e)}n.major=We;function We(e,r){return new h(e,r).major}n.minor=Ze;function Ze(e,r){return new h(e,r).minor}n.patch=Je;function Je(e,r){return new h(e,r).patch}n.compare=C;function C(e,r,t){return new h(e,t).compare(new h(r,t))}n.compareLoose=Ke;function Ke(e,r){return C(e,r,!0)}n.rcompare=Qe;function Qe(e,r,t){return C(r,e,t)}n.sort=Me;function Me(e,r){return e.sort(function(t,s){return n.compare(t,s,r)})}n.rsort=qe;function qe(e,r){return e.sort(function(t,s){return n.rcompare(t,s,r)})}n.gt=G;function G(e,r,t){return C(e,r,t)>0}n.lt=K;function K(e,r,t){return C(e,r,t)<0}n.eq=he;function he(e,r,t){return C(e,r,t)===0}n.neq=je;function je(e,r,t){return C(e,r,t)!==0}n.gte=pe;function pe(e,r,t){return C(e,r,t)>=0}n.lte=ve;function ve(e,r,t){return C(e,r,t)<=0}n.cmp=Q;function Q(e,r,t,s){switch(r){case"===":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e===t;case"!==":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e!==t;case"":case"=":case"==":return he(e,t,s);case"!=":return je(e,t,s);case">":return G(e,t,s);case">=":return pe(e,t,s);case"<":return K(e,t,s);case"<=":return ve(e,t,s);default:throw new TypeError("Invalid operator: "+r)}}n.Comparator=T;function T(e,r){if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),e instanceof T){if(e.loose===!!r.loose)return e;e=e.value}if(!(this instanceof T))return new T(e,r);l("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===x?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}var x={};T.prototype.parse=function(e){var r=this.options.loose?d[ce]:d[fe],t=e.match(r);if(!t)throw new TypeError("Invalid comparator: "+e);this.operator=t[1],this.operator==="="&&(this.operator=""),t[2]?this.semver=new h(t[2],this.options.loose):this.semver=x},T.prototype.toString=function(){return this.value},T.prototype.test=function(e){return l("Comparator.test",e,this.options.loose),this.semver===x?!0:(typeof e=="string"&&(e=new h(e,this.options)),Q(e,this.operator,this.semver,this.options))},T.prototype.intersects=function(e,r){if(!(e instanceof T))throw new TypeError("a Comparator is required");(!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1});var t;if(this.operator==="")return t=new E(e.value,r),M(this.value,t,r);if(e.operator==="")return t=new E(this.value,r),M(e.semver,t,r);var s=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),a=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,c=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),v=Q(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),p=Q(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return s||a||o&&c||v||p},n.Range=E;function E(e,r){if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),e instanceof E)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new E(e.raw,r);if(e instanceof T)return new E(e.value,r);if(!(this instanceof E))return new E(e,r);if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(t){return this.parseRange(t.trim())},this).filter(function(t){return t.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}E.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},E.prototype.toString=function(){return this.range},E.prototype.parseRange=function(e){var r=this.options.loose;e=e.trim();var t=r?d[Ne]:d[Oe];e=e.replace(t,lr),l("hyphen replace",e),e=e.replace(d[X],Xe),l("comparator trim",e,d[X]),e=e.replace(d[W],Ve),e=e.replace(d[J],Ue),e=e.split(/\s+/).join(" ");var s=r?d[ce]:d[fe],a=e.split(" ").map(function(o){return rr(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter(function(o){return!!o.match(s)})),a=a.map(function(o){return new T(o,this.options)},this),a},E.prototype.intersects=function(e,r){if(!(e instanceof E))throw new TypeError("a Range is required");return this.set.some(function(t){return t.every(function(s){return e.set.some(function(a){return a.every(function(o){return s.intersects(o,r)})})})})},n.toComparators=er;function er(e,r){return new E(e,r).set.map(function(t){return t.map(function(s){return s.value}).join(" ").trim().split(" ")})}function rr(e,r){return l("comp",e,r),e=ir(e,r),l("caret",e),e=tr(e,r),l("tildes",e),e=ar(e,r),l("xrange",e),e=or(e,r),l("stars",e),e}function g(e){return!e||e.toLowerCase()==="x"||e==="*"}function tr(e,r){return e.trim().split(/\s+/).map(function(t){return nr(t,r)}).join(" ")}function nr(e,r){var t=r.loose?d[$e]:d[Se];return e.replace(t,function(s,a,o,c,v){l("tilde",e,s,a,o,c,v);var p;return g(a)?p="":g(o)?p=">="+a+".0.0 <"+(+a+1)+".0.0":g(c)?p=">="+a+"."+o+".0 <"+a+"."+(+o+1)+".0":v?(l("replaceTilde pr",v),p=">="+a+"."+o+"."+c+"-"+v+" <"+a+"."+(+o+1)+".0"):p=">="+a+"."+o+"."+c+" <"+a+"."+(+o+1)+".0",l("tilde return",p),p})}function ir(e,r){return e.trim().split(/\s+/).map(function(t){return sr(t,r)}).join(" ")}function sr(e,r){l("caret",e,r);var t=r.loose?d[De]:d[Ce];return e.replace(t,function(s,a,o,c,v){l("caret",e,s,a,o,c,v);var p;return g(a)?p="":g(o)?p=">="+a+".0.0 <"+(+a+1)+".0.0":g(c)?a==="0"?p=">="+a+"."+o+".0 <"+a+"."+(+o+1)+".0":p=">="+a+"."+o+".0 <"+(+a+1)+".0.0":v?(l("replaceCaret pr",v),a==="0"?o==="0"?p=">="+a+"."+o+"."+c+"-"+v+" <"+a+"."+o+"."+(+c+1):p=">="+a+"."+o+"."+c+"-"+v+" <"+a+"."+(+o+1)+".0":p=">="+a+"."+o+"."+c+"-"+v+" <"+(+a+1)+".0.0"):(l("no pr"),a==="0"?o==="0"?p=">="+a+"."+o+"."+c+" <"+a+"."+o+"."+(+c+1):p=">="+a+"."+o+"."+c+" <"+a+"."+(+o+1)+".0":p=">="+a+"."+o+"."+c+" <"+(+a+1)+".0.0"),l("caret return",p),p})}function ar(e,r){return l("replaceXRanges",e,r),e.split(/\s+/).map(function(t){return ur(t,r)}).join(" ")}function ur(e,r){e=e.trim();var t=r.loose?d[Ae]:d[Te];return e.replace(t,function(s,a,o,c,v,p){l("xRange",e,s,a,o,c,v,p);var S=g(o),$=S||g(c),A=$||g(v),I=A;return a==="="&&I&&(a=""),S?a===">"||a==="<"?s="<0.0.0":s="*":a&&I?($&&(c=0),v=0,a===">"?(a=">=",$?(o=+o+1,c=0,v=0):(c=+c+1,v=0)):a==="<="&&(a="<",$?o=+o+1:c=+c+1),s=a+o+"."+c+"."+v):$?s=">="+o+".0.0 <"+(+o+1)+".0.0":A&&(s=">="+o+"."+c+".0 <"+o+"."+(+c+1)+".0"),l("xRange return",s),s})}function or(e,r){return l("replaceStars",e,r),e.trim().replace(d[be],"")}function lr(e,r,t,s,a,o,c,v,p,S,$,A,I){return g(t)?r="":g(s)?r=">="+t+".0.0":g(a)?r=">="+t+"."+s+".0":r=">="+r,g(p)?v="":g(S)?v="<"+(+p+1)+".0.0":g($)?v="<"+p+"."+(+S+1)+".0":A?v="<="+p+"."+S+"."+$+"-"+A:v="<="+v,(r+" "+v).trim()}E.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new h(e,this.options));for(var r=0;r<this.set.length;r++)if(cr(this.set[r],e,this.options))return!0;return!1};function cr(e,r,t){for(var s=0;s<e.length;s++)if(!e[s].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(s=0;s<e.length;s++)if(l(e[s].semver),e[s].semver!==x&&e[s].semver.prerelease.length>0){var a=e[s].semver;if(a.major===r.major&&a.minor===r.minor&&a.patch===r.patch)return!0}return!1}return!0}n.satisfies=M;function M(e,r,t){try{r=new E(r,t)}catch{return!1}return r.test(e)}n.maxSatisfying=fr;function fr(e,r,t){var s=null,a=null;try{var o=new E(r,t)}catch{return null}return e.forEach(function(c){o.test(c)&&(!s||a.compare(c)===-1)&&(s=c,a=new h(s,t))}),s}n.minSatisfying=hr;function hr(e,r,t){var s=null,a=null;try{var o=new E(r,t)}catch{return null}return e.forEach(function(c){o.test(c)&&(!s||a.compare(c)===1)&&(s=c,a=new h(s,t))}),s}n.minVersion=pr;function pr(e,r){e=new E(e,r);var t=new h("0.0.0");if(e.test(t)||(t=new h("0.0.0-0"),e.test(t)))return t;t=null;for(var s=0;s<e.set.length;++s){var a=e.set[s];a.forEach(function(o){var c=new h(o.semver.version);switch(o.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!t||G(t,c))&&(t=c);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return t&&e.test(t)?t:null}n.validRange=vr;function vr(e,r){try{return new E(e,r).range||"*"}catch{return null}}n.ltr=wr;function wr(e,r,t){return we(e,r,"<",t)}n.gtr=dr;function dr(e,r,t){return we(e,r,">",t)}n.outside=we;function we(e,r,t,s){e=new h(e,s),r=new E(r,s);var a,o,c,v,p;switch(t){case">":a=G,o=ve,c=K,v=">",p=">=";break;case"<":a=K,o=pe,c=G,v="<",p="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(M(e,r,s))return!1;for(var S=0;S<r.set.length;++S){var $=r.set[S],A=null,I=null;if($.forEach(function(D){D.semver===x&&(D=new T(">=0.0.0")),A=A||D,I=I||D,a(D.semver,A.semver,s)?A=D:c(D.semver,I.semver,s)&&(I=D)}),A.operator===v||A.operator===p||(!I.operator||I.operator===v)&&o(e,I.semver))return!1;if(I.operator===p&&c(e,I.semver))return!1}return!0}n.prerelease=Er;function Er(e,r){var t=b(e,r);return t&&t.prerelease.length?t.prerelease:null}n.intersects=mr;function mr(e,r,t){return e=new E(e,t),r=new E(r,t),e.intersects(r)}n.coerce=gr;function gr(e){if(e instanceof h)return e;if(typeof e!="string")return null;var r=e.match(d[Fe]);return r==null?null:b(r[1]+"."+(r[2]||"0")+"."+(r[3]||"0"))}})(ge,ge.exports);const Ar=parseInt({}.ELECTRON_IS_DEV,10)===1,Fr="ELECTRON_IS_DEV"in process.env;var Sr=Fr?Ar:process.defaultApp||/node_modules[\\/]electron[\\/]/.test(process.execPath);const ke=ge.exports,de=ke.gt,Ee=ke.lt,ee=Tr.default.release,Le=Sr;var k={renderer:function(){return process.type==="renderer"},main:function(){return process.type==="browser"},osx:function(){return process.platform==="darwin"},macOS:function(){return this.osx()},windows:function(){return process.platform==="win32"},linux:function(){return process.platform==="linux"},x86:function(){return process.arch==="ia32"},x64:function(){return process.arch==="x64"},production:function(){return!Le},dev:function(){return Le},sandbox:function(){return"APP_SANDBOX_CONTAINER_ID"in process.env},mas:function(){return process.mas===!0},windowsStore:function(){return process.windowsStore===!0},all:function(){const u=new Array(arguments.length);for(var n=0;n<u.length;n++)u[n]=arguments[n];if(!!u.length){for(n=0;n<u.length;n++)if(!u[n]())return!1;return!0}},none:function(){const u=new Array(arguments.length);for(var n=0;n<u.length;n++)u[n]=arguments[n];if(!!u.length){for(n=0;n<u.length;n++)if(u[n]())return!1;return!0}},one:function(){const u=new Array(arguments.length);for(var n=0;n<u.length;n++)u[n]=arguments[n];if(!!u.length){for(n=0;n<u.length;n++)if(u[n]())return!0;return!1}},release:function(u){if(this.osx())return u===me();if(this.windows()){u=u.split(".");const n=ee().split(".");return u.length===2?`${n[0]}.${n[1]}`==`${u[0]}.${u[1]}`:`${n[0]}.${n[1]}.${n[2]}`==`${u[0]}.${u[1]}.${u[2]}`}else return null},gtRelease:function(u){if(this.osx())return de(u,me());if(this.windows()){u=u.split(".");const n=ee().split(".");return u.length===2?de(`${u[0]}.${u[1]}.0`,`${n[0]}.${n[1]}.0`):de(`${u[0]}.${u[1]}.${u[2]}`,`${n[0]}.${n[1]}.${n[2]}`)}else return null},ltRelease:function(u){if(this.osx())return Ee(u,me());if(this.windows()){u=u.split(".");const n=ee().split(".");return u.length===2?Ee(`${u[0]}.${u[1]}.0`,`${n[0]}.${n[1]}.0`):Ee(`${u[0]}.${u[1]}.${u[2]}`,`${n[0]}.${n[1]}.${n[2]}`)}else return null}};function me(){const u=ee().split(".");return`10.${u[0]-4}.${u[1]}`}function $r(){var l,w;const u=k.dev()?V.join(m.app.getAppPath(),"/engine/toolbox-server.exe"):V.join(m.app.getAppPath(),"..","/toolbox-server.exe");if(!yr.existsSync(u))throw new Error(u);if(!k.dev()){const R=Rr.spawn(u,{windowsHide:!1,stdio:k.dev()?"pipe":"ignore"});k.dev()&&((l=R.stdout)==null||l.on("data",function(y){console.log("engine stdout===>",y.toString())}),(w=R.stderr)==null||w.on("data",function(y){console.log("engine stderr===>",y.toString())}))}}function Cr(){m.ipcMain.on("video-MessageBox",(u,n)=>{var l;(l=exports.win)==null||l.focus(),exports.win&&m.dialog.showMessageBox(exports.win,{type:"info",title:"\u4E0B\u8F7D",noLink:!0,message:"\u68C0\u6D4B\u5230\u94FE\u63A5,\u662F\u5426\u4E0B\u8F7D",buttons:["\u53D6\u6D88","\u786E\u5B9A"]}).then(w=>{w.response===1?console.log("You click ok."):console.log("You click cancel")})}),m.ipcMain.on("setwindowsTop",(u,n)=>{var l,w;(l=exports.win)!=null&&l.isAlwaysOnTop()||(w=exports.win)==null||w.setAlwaysOnTop(!0)}),m.ipcMain.on("cancelwindowsTop",(u,n)=>{var l,w;(l=exports.win)!=null&&l.isAlwaysOnTop()&&((w=exports.win)==null||w.setAlwaysOnTop(!1))}),m.ipcMain.on("windowsShow",(u,n)=>{var l,w;(l=exports.win)!=null&&l.isVisible()?exports.win.focus():(w=exports.win)==null||w.show()}),m.ipcMain.on("window-min",(u,n)=>{var l;(l=exports.win)==null||l.minimize()}),m.ipcMain.on("window-close",(u,n)=>{var l;(l=exports.win)==null||l.close()})}const{autoUpdater:F}=require("electron-updater"),q={error:"\u68C0\u67E5\u66F4\u65B0\u51FA\u9519",checking:"\u6B63\u5728\u68C0\u67E5\u66F4\u65B0\u2026\u2026",updateAva:"\u68C0\u6D4B\u5230\u65B0\u7248\u672C\uFF0C\u6B63\u5728\u4E0B\u8F7D\u2026\u2026",updateNotAva:"\u73B0\u5728\u4F7F\u7528\u7684\u5C31\u662F\u6700\u65B0\u7248\u672C\uFF0C\u4E0D\u7528\u66F4\u65B0"};k.dev()&&(F.updateConfigPath=_e.default.join(__dirname,"dev-app-update.yml"));function Dr(){F.disableWebInstaller=!0;const u=n=>{var l;(l=exports.win)==null||l.webContents.send("message",n)};F.autoDownload=!1,F.on("error",n=>{u(`${q.error}:${n}`)}),F.on("checking-for-update",()=>{u(q.checking)}),F.on("update-available",()=>{var n;(n=exports.win)==null||n.webContents.send("getVersion","\u83B7\u53D6\u5230\u66F4\u65B0"),m.dialog.showMessageBox({type:"info",title:"\u5E94\u7528\u6709\u65B0\u7684\u66F4\u65B0",message:"\u53D1\u73B0\u65B0\u7248\u672C\uFF0C\u662F\u5426\u73B0\u5728\u66F4\u65B0\uFF1F",noLink:!0,buttons:["\u662F","\u5426"]}).then(({response:l})=>{var w;l===0&&((w=exports.win)==null||w.webContents.send("checkUpdate","\u786E\u8BA4\u4E0B\u8F7D"),u(q.updateAva),F.downloadUpdate())})}),F.on("update-not-available",()=>{u(q.updateNotAva),m.dialog.showMessageBox({title:"\u68C0\u67E5\u66F4\u65B0",message:"\u5F53\u524D\u7248\u672C\u5DF2\u662F\u6700\u65B0\u7248\u672C,\u65E0\u9700\u66F4\u65B0"})}),F.on("download-progress",n=>{var l;(l=exports.win)==null||l.webContents.send("downloadProgress",n)}),F.on("update-downloaded",()=>{var n;(n=exports.win)==null||n.webContents.send("updateDownloaded","\u66F4\u65B0\u5DF2\u4E0B\u8F7D"),m.dialog.showMessageBox({title:"\u5B89\u88C5\u66F4\u65B0",message:"\u66F4\u65B0\u4E0B\u8F7D\u5B8C\u6BD5\uFF0C\u5E94\u7528\u5C06\u91CD\u542F\u5E76\u8FDB\u884C\u5B89\u88C5"}).then(()=>{setImmediate(()=>F.quitAndInstall())})}),m.ipcMain.on("checkForUpdate",()=>{console.log(222),F.checkForUpdates()}),m.ipcMain.on("checkAppVersion",()=>{var n;(n=exports.win)==null||n.webContents.send("version",m.app.getVersion())})}exports.win=void 0;V.join(__dirname,"../preload/index.js");const Or=()=>{exports.win=new m.BrowserWindow({width:1024,height:768,frame:!1,useContentSize:!0,resizable:!1,webPreferences:{contextIsolation:!1,nodeIntegration:!0,webviewTag:!0,nodeIntegrationInWorker:!0}}),require("@electron/remote/main").initialize(),require("@electron/remote/main").enable(exports.win.webContents),m.app.isPackaged?exports.win.loadFile(_e.default.join(__dirname,"../dist/index.html")):(exports.win.loadURL("http://localhost:3002/"),exports.win.webContents.openDevTools()),exports.win.setMenu(null),exports.win.on("close",w=>{var R,y;w.preventDefault(),(R=exports.win)==null||R.hide(),(y=exports.win)==null||y.setSkipTaskbar(!0)});const u=k.dev()?V.join(__dirname,"../public/icon.ico"):V.join(m.app.getAppPath(),"..","icon.ico");let n=new m.Tray(u);n.setToolTip("toolbox");const l=m.Menu.buildFromTemplate([{label:"\u663E\u793A",click:()=>{var w;(w=exports.win)==null||w.show()}},{label:"\u9000\u51FA",click:()=>{var w;(w=exports.win)==null||w.destroy()}}]);n.setContextMenu(l),n.on("click",()=>{var w,R,y,d;(w=exports.win)!=null&&w.isVisible()?exports.win.hide():(R=exports.win)==null||R.show(),(y=exports.win)!=null&&y.isVisible()?exports.win.setSkipTaskbar(!1):(d=exports.win)==null||d.setSkipTaskbar(!0)}),Cr(),Dr(),Object.defineProperty(m.app,"isPackaged",{get(){return!0}})};m.app.whenReady().then(Or);m.app.setAppUserModelId("ToolBox");$r();
